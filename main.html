<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Playbook by Pablo Munoz</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #001F3F 0%, #1a3a5c 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .sidebar-nav {
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            width: 90px;
            background: #001224;
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 2rem;
            z-index: 1001;
            transition: width 0.3s ease;
        }

        .sidebar-nav:hover {
            width: 220px;
        }

        .nav-link {
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            padding: 1rem;
            width: 100%;
            text-align: center;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            padding-left: 28px;
            overflow: hidden;
            white-space: nowrap;
        }

        .sidebar-nav:hover .nav-link {
            padding-left: 1.5rem;
        }

        .nav-link.active {
            color: white;
            background: rgba(0, 31, 63, 0.8);
            border-left: 4px solid #38bdf8;
        }
        
        .nav-link.active span {
            font-weight: 600;
        }

        .nav-link:hover {
            color: white;
            background: rgba(0, 31, 63, 1);
        }

        .nav-link .icon {
            font-size: 1.5rem;
            min-width: 35px;
            text-align: center;
        }

        .nav-link span {
            display: none;
            margin-left: 1rem;
            opacity: 0;
            transition: opacity 0.2s ease-in-out;
        }

        .sidebar-nav:hover .nav-link span {
            display: inline;
            opacity: 1;
        }

        .main-content {
            margin-left: 90px;
            transition: margin-left 0.3s ease;
        }
        
        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 2rem;
            position: relative;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.03)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
            opacity: 0.5;
        }
        
        .hero-content {
            position: relative;
            z-index: 1;
            max-width: 800px;
        }
        
        .hero h1 {
            font-size: 4rem;
            font-weight: 800;
            color: white;
            margin-bottom: 1rem;
            text-shadow: 0 10px 30px rgba(0,0,0,0.3);
            animation: fadeInUp 1s ease-out;
        }
        
        .hero .subtitle {
            font-size: 1.5rem;
            color: rgba(255,255,255,0.9);
            margin-bottom: 3rem;
            font-weight: 300;
            animation: fadeInUp 1s ease-out 0.2s both;
        }
        
        .pm-definition {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 2rem;
            border-radius: 20px;
            margin: 2rem 0;
            border: 1px solid rgba(255,255,255,0.2);
        }
        
        .pm-definition h3 {
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .pm-definition p {
            color: rgba(255,255,255,0.9);
            line-height: 1.6;
            font-size: 1.1rem;
        }
        
        .cta-button {
            background: linear-gradient(45deg, #38bdf8, #0ea5e9);
            color: white;
            padding: 1.2rem 3.5rem;
            border: none;
            border-radius: 50px;
            font-size: 1.4rem;
            font-weight: 700;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: all 0.3s ease;
            box-shadow: 0 10px 30px rgba(0, 31, 63, 0.3);
            animation: fadeInUp 1s ease-out 0.4s both, pulse 2s infinite 2s;
        }
        
        .cta-button:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 15px 40px rgba(14, 165, 233, 0.4);
        }
        
        .risks-section, .framework-section, .resources-section, .ai-assistant-section, .social-proof-section {
            background: white;
            padding: 6rem 2rem;
            position: relative;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .section-title {
            font-size: 3rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #001F3F, #1a3a5c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .section-subtitle {
            text-align: center;
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 4rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .risks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 4rem;
        }
        
        .risk-card {
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .risk-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient);
        }
        
        .risk-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 30px 80px rgba(0,0,0,0.15);
        }
        
        .risk-card.value { --gradient: linear-gradient(45deg, #001F3F, #1a3a5c); }
        .risk-card.usability { --gradient: linear-gradient(45deg, #2c5282, #3182ce); }
        .risk-card.feasibility { --gradient: linear-gradient(45deg, #001F3F, #2c5282); }
        .risk-card.viability { --gradient: linear-gradient(45deg, #1a3a5c, #2d3748); }
        
        .risk-icon {
            width: 80px;
            height: 80px;
            margin: 0 auto 1.5rem;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            background: var(--gradient);
        }
        
        .risk-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #333;
        }
        
        .risk-description {
            color: #666;
            line-height: 1.6;
            font-size: 1rem;
        }
        
        .phases-section {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            padding: 6rem 2rem;
        }
        
        .phases-timeline {
            display: flex;
            flex-direction: column;
            gap: 4rem;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .phase-item {
            display: flex;
            align-items: center;
            gap: 3rem;
            opacity: 0;
            animation: slideInLeft 0.8s ease-out forwards;
        }
        
        .phase-item:nth-child(even) {
            flex-direction: row-reverse;
            animation: slideInRight 0.8s ease-out forwards;
        }
        
        .phase-number {
            flex-shrink: 0;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: linear-gradient(45deg, #001F3F, #1a3a5c);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 700;
            box-shadow: 0 15px 40px rgba(0, 31, 63, 0.3);
        }
        
        .phase-content {
            flex: 1;
            background: white;
            padding: 2.5rem;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
        }
        
        .phase-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #333;
        }
        
        .phase-description {
            color: #666;
            line-height: 1.6;
            margin-bottom: 2rem;
        }
        
        .phase-tools {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
        }
        
        .tool-tag {
            background: linear-gradient(45deg, #001F3F, #1a3a5c);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .tool-tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 31, 63, 0.3);
        }
        
        .framework-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 3rem;
            margin-top: 4rem;
        }
        
        .framework-card.full-width {
            grid-column: 1 / -1;
            max-width: none;
        }
        
        .framework-card {
            background: linear-gradient(135deg, #001F3F 0%, #1a3a5c 100%);
            border-radius: 25px;
            padding: 0;
            overflow: hidden;
            box-shadow: 0 25px 70px rgba(0, 31, 63, 0.3);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .framework-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 35px 90px rgba(0, 31, 63, 0.4);
        }

        .framework-card.used .framework-header {
            background: linear-gradient(135deg, #059669 0%, #10b981 100%);
        }

        .framework-card.used::after {
            content: '✓ In Progress';
            position: absolute;
            top: 1.2rem;
            right: 1.2rem;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 0.35rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .framework-header {
            padding: 2rem;
            color: white;
        }
        
        .framework-title {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .framework-subtitle {
            opacity: 0.9;
            font-size: 1rem;
        }
        
        .framework-body {
            background: white;
            padding: 2.5rem;
            min-height: 300px;
        }
        
        .framework-body h4 {
            color: #333;
            margin-bottom: 1rem;
            font-weight: 600;
        }
        
        .framework-input {
            width: 100%;
            padding: 1rem;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            margin-bottom: 1rem;
            font-family: inherit;
            transition: border-color 0.3s ease;
        }
        
        .framework-input:focus {
            outline: none;
            border-color: #001F3F;
            box-shadow: 0 0 0 3px rgba(0, 31, 63, 0.1);
        }
        
        .framework-textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .lean-canvas-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .canvas-section {
            background: #f8fafc;
            padding: 1rem;
            border-radius: 10px;
            border-top: 3px solid #001F3F;
        }
        
        .canvas-section.span-2 {
            grid-column: span 2;
        }
        
        .canvas-section.span-3 {
            grid-column: span 3;
        }
        
        .canvas-section.span-5 {
            grid-column: span 5;
        }
        
        .canvas-section h5 {
            color: #001F3F;
            font-weight: 700;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
        
        .canvas-input {
            width: 100%;
            min-height: 80px;
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            resize: vertical;
            font-family: inherit;
            font-size: 0.9rem;
        }
        
        .canvas-input:focus {
            outline: none;
            border-color: #001F3F;
        }
        
        .canvas-attribution {
            background: #f8fafc;
            padding: 1rem;
            border-radius: 10px;
            text-align: center;
            margin-top: 1rem;
            border-top: 2px solid #001F3F;
        }
        
        .canvas-attribution a {
            color: #001F3F;
            text-decoration: none;
            font-weight: 600;
        }
        
        .canvas-attribution a:hover {
            text-decoration: underline;
        }

        .prioritization-grid {
            display: grid;
            grid-template-columns: 2fr repeat(4, 1fr) 1.5fr;
            gap: 1.5rem;
            align-items: end;
        }
        .priority-item {
            display: flex;
            flex-direction: column;
        }
        .priority-item label {
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
        }
        .priority-item-score {
            text-align: center;
            background: #001F3F;
            color: white;
            padding: 1rem;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .priority-item-score h4 {
            color: white;
            margin-bottom: 0.5rem;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        .total-score {
            font-size: 2.5rem;
            font-weight: 800;
        }
        
        .resource-tab-nav {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 3rem;
            border-bottom: 2px solid #e2e8f0;
        }
        
        .resource-tab {
            padding: 1rem 2rem;
            background: transparent;
            border: none;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }
        
        .resource-tab.active {
            color: #001F3F;
            border-bottom-color: #001F3F;
        }
        
        .resource-category-content {
            display: none;
        }
        
        .resource-category-content.active {
            display: block;
        }
        
        .resource-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .resource-card {
            background: #f8fafc;
            padding: 2rem;
            border-radius: 20px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .resource-card:hover {
            border-color: #001F3F;
            transform: translateY(-5px);
            box-shadow: 0 20px 50px rgba(0, 31, 63, 0.15);
        }
        
        .resource-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        .resource-card h4 {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #333;
        }
        
        .resource-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 1.5rem 0;
            font-size: 0.9rem;
            color: #666;
        }
        
        .download-btn {
            background: linear-gradient(45deg, #001F3F, #1a3a5c);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 31, 63, 0.3);
        }
        
        .learning-path-header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem;
            background: linear-gradient(135deg, #001F3F, #1a3a5c);
            color: white;
            border-radius: 20px;
        }
        
        .learning-path-header h3 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .learning-path-header p {
            opacity: 0.9;
            margin-bottom: 1.5rem;
        }
        
        .view-timeline-btn, .see-all-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .view-timeline-btn:hover, .see-all-btn:hover {
            background: rgba(255,255,255,0.3);
            border-color: rgba(255,255,255,0.5);
        }
        
        .book-recommendations {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        .book-card {
            display: flex;
            gap: 2rem;
            background: #f8fafc;
            padding: 2rem;
            border-radius: 20px;
            align-items: center;
        }
        
        .book-card.featured {
            border: 3px solid #001F3F;
            background: linear-gradient(135deg, #f8fafc 0%, #e6f3ff 100%);
        }
        
        .book-cover {
            font-size: 4rem;
            flex-shrink: 0;
        }
        
        .book-info h4 {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: #333;
        }
        
        .month-badge {
            background: linear-gradient(45deg, #001F3F, #1a3a5c);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 0.5rem;
        }
        
        .book-rating {
            margin: 1rem 0;
            color: #f59e0b;
        }
        
        .book-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }
        
        .tag {
            background: #001F3F;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
        }
        
        .quick-preview {
            background: #f8fafc;
            padding: 2rem;
            border-radius: 20px;
            border-left: 5px solid #001F3F;
            margin-top: 2rem;
        }
        
        .quick-preview h4 {
            color: #001F3F;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .quick-preview ul {
            list-style: none;
            padding: 0;
            margin-bottom: 1.5rem;
        }
        
        .quick-preview li {
            padding: 0.5rem 0;
            border-bottom: 1px solid #e2e8f0;
            color: #666;
        }
        
        .quick-preview li:last-child {
            border-bottom: none;
            font-style: italic;
            color: #001F3F;
        }
        
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }
        
        .tool-recommendation {
            background: #f8fafc;
            padding: 2rem;
            border-radius: 20px;
            text-align: center;
        }
        
        .tool-logo {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        .tool-pricing {
            color: #10b981;
            font-weight: 600;
            margin: 1rem 0;
        }
        
        .communities-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        
        .community-card {
            background: #f8fafc;
            padding: 2rem;
            border-radius: 20px;
            text-align: center;
        }
        
        .community-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        .community-stats {
            display: flex;
            justify-content: space-between;
            margin: 1rem 0;
            font-size: 0.9rem;
            color: #666;
        }
        
        .join-btn {
            background: linear-gradient(45deg, #10b981, #059669);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .social-proof-section {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }
        .testimonial-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }
        .testimonial-card {
            background: white;
            border-radius: 20px;
            padding: 2.5rem;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .testimonial-text {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #333;
            margin-bottom: 2rem;
            font-style: italic;
        }
        .testimonial-author {
            display: flex;
            align-items: center;
        }
        .author-avatar {
            font-size: 2.5rem;
            margin-right: 1rem;
        }
        .author-info h4 {
            font-weight: 700;
            color: #001F3F;
        }
        .author-info span {
            color: #666;
            font-size: 0.9rem;
        }
        
        .learning-timeline-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 10000;
            display: none;
            justify-content: center;
            align-items: center;
            padding: 2rem;
        }
        
        .timeline-content {
            background: white;
            border-radius: 25px;
            max-width: 900px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }
        
        .timeline-header {
            background: linear-gradient(135deg, #001F3F, #1a3a5c);
            color: white;
            padding: 2rem;
            border-radius: 25px 25px 0 0;
            position: sticky;
            top: 0;
            z-index: 1;
        }
        
        .close-timeline {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .close-timeline:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .timeline-books {
            padding: 2rem;
        }
        
        .timeline-month {
            display: flex;
            gap: 2rem;
            margin-bottom: 2rem;
            padding-bottom: 2rem;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .timeline-month:last-child {
            border-bottom: none;
        }
        
        .month-number {
            flex-shrink: 0;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(45deg, #001F3F, #1a3a5c);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
        }
        
        .month-details {
            flex: 1;
        }
        
        .month-details h4 {
            color: #001F3F;
            font-weight: 700;
            margin-bottom: 0.5rem;
            font-size: 1.2rem;
        }
        
        .month-details .author {
            color: #666;
            font-style: italic;
            margin-bottom: 1rem;
        }
        
        .month-details .reasoning {
            color: #333;
            line-height: 1.6;
        }
        
        .template-explanation {
            background: #f8fafc;
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            border-left: 4px solid #001F3F;
        }
        
        .explanation-section {
            margin-bottom: 1rem;
        }
        
        .explanation-section:last-child {
            margin-bottom: 0;
        }
        
        .explanation-section h4 {
            color: #001F3F;
            font-weight: 700;
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.5rem;
        }
        
        .explanation-section p {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .canvas-explanation {
            background: linear-gradient(135deg, #f8fafc 0%, #e6f3ff 100%);
            border-left: 4px solid #001F3F;
        }
        
        .explanation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }
        
        .editable-template {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            margin-bottom: 1.5rem;
        }
        
        .template-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 1rem;
        }
        
        .btn-save, .btn-reset, .btn-export {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .btn-save {
            background: #001F3F;
            color: white;
        }
        
        .btn-save:hover {
            background: #1a3a5c;
        }
        
        .btn-reset {
            background: #f1f5f9;
            color: #64748b;
            border: 1px solid #e2e8f0;
        }
        
        .btn-reset:hover {
            background: #e2e8f0;
        }
        
        .btn-export {
            background: #10b981;
            color: white;
        }
        
        .btn-export:hover {
            background: #059669;
        }
        
        .reset-confirmation {
            background: #fef2f2;
            border: 1px solid #fecaca;
            padding: 1rem;
            border-radius: 8px;
            text-align: center;
            margin-top: 1rem;
        }
        
        .reset-confirmation p {
            margin-bottom: 1rem;
            color: #991b1b;
            font-weight: 600;
        }
        
        .btn-confirm, .btn-cancel {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            margin: 0 0.5rem;
            transition: all 0.3s ease;
        }
        
        .btn-confirm {
            background: #dc2626;
            color: white;
        }
        
        .btn-confirm:hover {
            background: #b91c1c;
        }
        
        .btn-cancel {
            background: #f1f5f9;
            color: #64748b;
        }
        
        .btn-cancel:hover {
            background: #e2e8f0;
        }
        
        .ai-assistant-section {
            background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 100%);
            padding: 6rem 2rem;
        }
        
        .ai-assistant-card {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            padding: 3rem;
            border: 1px solid rgba(255,255,255,0.2);
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
            align-items: center;
        }
        
        .ai-content {
            color: white;
        }
        
        .ai-avatar {
            font-size: 4rem;
            margin-bottom: 1.5rem;
        }
        
        .ai-content h3 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .ai-capabilities {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 2rem;
        }
        
        .capability {
            background: rgba(255,255,255,0.2);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .ai-chat-interface {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            min-height: 500px;
            height: 70vh;
            display: flex;
            flex-direction: column;
            max-width: 100%;
        }
        
        .chat-header {
            background: #f8fafc;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e2e8f0;
            flex-shrink: 0;
        }
        
        .status-indicator {
            font-size: 0.9rem;
        }
        
        .chat-messages {
            flex: 1;
            padding: 1rem;
            overflow-y: auto;
            min-height: 0;
        }
        
        .ai-message, .user-message {
            margin-bottom: 1rem;
            word-wrap: break-word;
        }
        
        .ai-message {
            display: flex;
            gap: 0.75rem;
            align-items: flex-start;
        }
        
        .user-message {
            display: flex;
            gap: 0.75rem;
            justify-content: flex-end;
            align-items: flex-start;
        }
        
        .message-avatar {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #001F3F;
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        .user-avatar {
            background: #374151;
        }
        
        .message-content {
            background: #f8fafc;
            padding: 1rem;
            border-radius: 15px;
            max-width: 85%;
            line-height: 1.5;
        }
        
        .user-content {
            background: #001F3F;
            color: white;
        }
        
        .chat-input-area {
            display: flex;
            gap: 0.5rem;
            padding: 1rem;
            border-top: 1px solid #e2e8f0;
            flex-shrink: 0;
        }
        
        .chat-input-area input {
            flex: 1;
            padding: 0.75rem;
            border: 1px solid #e2e8f0;
            border-radius: 20px;
            outline: none;
            min-width: 0;
        }
        
        .send-btn {
            background: #001F3F;
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 20px;
            cursor: pointer;
            flex-shrink: 0;
            white-space: nowrap;
        }
        
        .quick-questions {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            padding: 1rem;
            border-top: 1px solid #e2e8f0;
            flex-shrink: 0;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .question-category {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .question-category h6 {
            font-size: 0.7rem;
            font-weight: 600;
            color: #001F3F;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 0.25rem;
            padding-left: 0.25rem;
        }
        
        .question-category .quick-q {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            padding: 0.4rem 0.8rem;
            border-radius: 12px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            flex-shrink: 0;
            text-align: left;
        }
        
        .question-category .quick-q:hover {
            background: #001F3F;
            color: white;
            border-color: #001F3F;
        }
        
        .joke-btn {
            background: linear-gradient(45deg, #ff6b6b, #ff8e53) !important;
            color: white !important;
            border: none !important;
        }
        
        .joke-btn:hover {
            background: linear-gradient(45deg, #ff5252, #ff7043) !important;
            transform: translateY(-1px);
        }
        
        .footer-section {
            background: #1f2937;
            color: white;
            padding: 4rem 2rem 2rem;
        }
        
        .footer-content {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 4rem;
            margin-bottom: 2rem;
        }
        
        .footer-main h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }
        
        .footer-social {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }
        
        .social-link {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            transition: all 0.3s ease;
        }
        
        .social-link:hover {
            background: #001F3F;
        }
        
        .footer-links {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2rem;
        }
        
        .link-group h4 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #001F3F;
        }
        
        .link-group a {
            display: block;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            margin-bottom: 0.5rem;
            transition: color 0.3s ease;
        }
        
        .link-group a:hover {
            color: white;
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 2rem;
            border-top: 1px solid rgba(255,255,255,0.1);
            color: rgba(255,255,255,0.6);
        }
        
        .credits {
            margin-top: 1rem;
            font-size: 0.8rem;
            opacity: 0.8;
            line-height: 1.4;
        }
        
        .credits p {
            margin-bottom: 0.5rem;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
        
        .roadmap-vertical {
            padding: 1rem;
        }
        .roadmap-swimlane-vertical {
            margin-bottom: 2rem;
            background: white;
            border-radius: 20px;
            padding: 1.5rem;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
        }
        .swimlane-header {
            display: flex;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid #e2e8f0;
        }
        .swimlane-icon {
            font-size: 1.5rem;
            margin-right: 1rem;
            background: linear-gradient(45deg, #001F3F, #1a3a5c);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .swimlane-header h3 {
            font-size: 1.8rem;
            font-weight: 700;
            color: #333;
        }
        .book-cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
        }
        .book-card-vertical {
            background: #f8fafc;
            border-radius: 15px;
            padding: 1.5rem;
            border-top: 4px solid #0ea5e9;
        }
        .book-card-vertical h4 {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }
        .book-card-vertical .author {
            font-style: italic;
            color: #666;
            margin-bottom: 1rem;
        }
        .book-card-vertical .okr-title {
            font-weight: 700;
            margin-top: 1rem;
            font-size: 0.9rem;
        }
        .book-card-vertical .okr-list {
            list-style: none;
            padding: 0;
            margin-top: 0.5rem;
        }
        .book-card-vertical .okr-list li {
            background: #e0f2fe;
            padding: 0.5rem;
            border-radius: 8px;
            font-size: 0.9rem;
        }

        @media (max-width: 768px) {
            .sidebar-nav {
                width: 100%;
                height: auto;
                bottom: 0;
                top: auto;
                flex-direction: row;
                justify-content: space-around;
                border-top: 1px solid rgba(255,255,255,0.1);
                border-right: none;
                padding-top: 0;
            }
            .sidebar-nav:hover {
                width: 100%;
            }
            .nav-link {
                padding: 0.8rem 0.5rem;
                justify-content: center;
            }
            .sidebar-nav:hover .nav-link {
                padding-left: 0.5rem;
            }
            .nav-link span {
                display: none !important;
            }
            .main-content {
                margin-left: 0;
                padding-bottom: 60px; /* Space for bottom nav */
            }
            .hero h1 { font-size: 2.5rem; }
            .hero .subtitle { font-size: 1.2rem; }
            .section-title { font-size: 2rem; }
            .phase-item { flex-direction: column !important; }
            .framework-grid { grid-template-columns: 1fr; }
            
            .ai-assistant-card {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 2rem;
                padding: 2rem;
            }
            
            .ai-chat-interface {
                height: 60vh;
                min-height: 400px;
            }
            
            .chat-messages {
                padding: 0.75rem;
            }
            
            .message-content {
                max-width: 95%;
                padding: 0.75rem;
                font-size: 0.9rem;
            }
            
            .message-avatar {
                width: 28px;
                height: 28px;
                font-size: 0.8rem;
            }
            
            .chat-input-area {
                padding: 0.75rem;
                gap: 0.5rem;
            }
            
            .chat-input-area input {
                padding: 0.6rem;
                font-size: 0.9rem;
            }
            
            .send-btn {
                padding: 0.6rem 1rem;
                font-size: 0.9rem;
            }
            
            .quick-questions {
                padding: 0.75rem;
                max-height: 150px;
                gap: 0.75rem;
            }
            
            .question-category h6 {
                font-size: 0.65rem;
            }
            
            .question-category .quick-q {
                font-size: 0.7rem;
                padding: 0.35rem 0.7rem;
            }
            
            .footer-content {
                grid-template-columns: 1fr;
                text-align: center;
                gap: 2rem;
            }
            
            .footer-links {
                grid-template-columns: 1fr;
            }
            
            .lean-canvas-grid {
                grid-template-columns: 1fr;
                gap: 0.75rem;
            }
            
            .canvas-section.span-2,
            .canvas-section.span-3 {
                grid-column: span 1;
            }
            
            .canvas-input {
                min-height: 60px;
                font-size: 0.9rem;
            }
            .prioritization-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <nav class="sidebar-nav">
        <a href="#hero" class="nav-link active" data-section="hero"><div class="icon">🏠</div><span>Home</span></a>
        <a href="#risks" class="nav-link" data-section="risks"><div class="icon">🎲</div><span>Risks</span></a>
        <a href="#phases" class="nav-link" data-section="phases"><div class="icon">🚀</div><span>Journey</span></a>
        <a href="#frameworks" class="nav-link" data-section="frameworks"><div class="icon">📋</div><span>Frameworks</span></a>
        <a href="#resources" class="nav-link" data-section="resources"><div class="icon">📚</div><span>Resources</span></a>
        <a href="#ai-assistant" class="nav-link" data-section="ai-assistant"><div class="icon">🤖</div><span>AI Assistant</span></a>
    </nav>
    <main class="main-content">
        <section id="hero" class="hero">
            <div class="hero-content">
                <h1>Product Playbook by Pablo Munoz</h1>
                <p class="subtitle">Your intelligent companion for building products that customers love and businesses thrive on</p>
                <div class="pm-definition">
                    <h3>What is a PM?</h3>
                    <p>Product Managers are the bridge between customer needs, business goals, and technical possibilities. They discover what to build, define why it matters, deliver solutions that work, and learn from real-world impact.</p>
                </div>
                <a href="#risks" class="cta-button">Start Your Journey</a>
            </div>
        </section>

        <section id="risks" class="risks-section">
            <div class="container">
                <h2 class="section-title">The Four Big Risks</h2>
                <p class="section-subtitle">Every product faces these fundamental challenges. Master them, and you'll build products that win.</p>
                
                <div class="risks-grid">
                    <div class="risk-card value">
                        <div class="risk-icon">💎</div>
                        <h3 class="risk-title">Value Risk</h3>
                        <p class="risk-description">Will customers actually want this? The graveyard of products is full of "solutions" nobody asked for.</p>
                    </div>
                    
                    <div class="risk-card usability">
                        <div class="risk-icon">🎯</div>
                        <h3 class="risk-title">Usability Risk</h3>
                        <p class="risk-description">Can users actually figure out how to use it? Even the most valuable solution fails if it's confusing.</p>
                    </div>
                    
                    <div class="risk-card feasibility">
                        <div class="risk-icon">⚡</div>
                        <h3 class="risk-title">Feasibility Risk</h3>
                        <p class="risk-description">Can we actually build this with our team, timeline, and tech stack? Dreams meet reality here.</p>
                    </div>
                    
                    <div class="risk-card viability">
                        <div class="risk-icon">🚀</div>
                        <h3 class="risk-title">Viability Risk</h3>
                        <p class="risk-description">Will this work for our business? Legal, financial, operational - the business model has to add up.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="phases" class="phases-section">
            <div class="container">
                <h2 class="section-title">The Product Journey</h2>
                <p class="section-subtitle">Four phases that transform ideas into impact. Each phase has its purpose, tools, and mindset.</p>
                
                <div class="phases-timeline">
                    <div class="phase-item" style="animation-delay: 0.2s;">
                        <div class="phase-number">1</div>
                        <div class="phase-content">
                            <h3 class="phase-title">Define</h3>
                            <p class="phase-description">Start with the end in mind. What's the vision? Who are we serving? What problem are we solving? This phase is about getting crystal clear on direction before you start building.</p>
                            <div class="phase-tools">
                                <span class="tool-tag">Vision Canvas</span>
                                <span class="tool-tag">PR/FAQ</span>
                                <span class="tool-tag">Strategy Map</span>
                                <span class="tool-tag">User Personas</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="phase-item" style="animation-delay: 0.4s;">
                        <div class="phase-number">2</div>
                        <div class="phase-content">
                            <h3 class="phase-title">Discover</h3>
                            <p class="phase-description">Fall in love with the problem, not the solution. Validate assumptions, talk to users, run experiments. This is where hypotheses meet reality.</p>
                            <div class="phase-tools">
                                <span class="tool-tag">Lean Canvas</span>
                                <span class="tool-tag">User Interviews</span>
                                <span class="tool-tag">A/B Tests</span>
                                <span class="tool-tag">Prototype</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="phase-item" style="animation-delay: 0.6s;">
                        <div class="phase-number">3</div>
                        <div class="phase-content">
                            <h3 class="phase-title">Deliver</h3>
                            <p class="phase-description">Execute with precision. Prioritize ruthlessly, coordinate teams, and ship iteratively. This is where planning meets execution.</p>
                            <div class="phase-tools">
                                <span class="tool-tag">OKRs</span>
                                <span class="tool-tag">Roadmap</span>
                                <span class="tool-tag">RACI Matrix</span>
                                <span class="tool-tag">Sprint Planning</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="phase-item" style="animation-delay: 0.8s;">
                        <div class="phase-number">4</div>
                        <div class="phase-content">
                            <h3 class="phase-title">Learn</h3>
                            <p class="phase-description">Measure what matters. Analyze user behavior, gather feedback, iterate based on data. This is where products evolve from good to great.</p>
                            <div class="phase-tools">
                                <span class="tool-tag">Analytics Dashboard</span>
                                <span class="tool-tag">User Feedback</span>
                                <span class="tool-tag">Cohort Analysis</span>
                                <span class="tool-tag">Retrospectives</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="frameworks" class="framework-section">
            <div class="container">
                <h2 class="section-title">Interactive Frameworks</h2>
                <p class="section-subtitle">Ready-to-use tools that help you think through problems and communicate solutions. Click to start using.</p>
                
                <div class="framework-grid">
                    <div class="framework-card" data-framework-id="vision">
                        <div class="framework-header">
                            <h3 class="framework-title">Vision & Strategy Canvas</h3>
                            <p class="framework-subtitle">Define your North Star and strategic direction</p>
                        </div>
                        <div class="framework-body">
                            <div class="template-explanation">
                                <div class="explanation-section">
                                    <h4>What this is</h4>
                                    <p>A one-page strategic document that aligns your product's direction with company mission and customer needs.</p>
                                </div>
                                <div class="explanation-section">
                                    <h4>Why it's helpful</h4>
                                    <p>Forces clarity of thought and ensures every feature is valuable, viable, usable, and feasible. Acts as your product's North Star.</p>
                                </div>
                                <div class="explanation-section">
                                    <h4>When to use</h4>
                                    <p>At the start of any new product or major feature initiative, or when your team lacks clear direction.</p>
                                </div>
                            </div>
                            <div class="editable-template">
                                <h4>Mission Statement</h4>
                                <input type="text" class="framework-input" placeholder="What's your product's core purpose?" data-key="vision-mission" />
                                <h4>Target User</h4>
                                <input type="text" class="framework-input" placeholder="Who are you building this for?" data-key="vision-user" />
                                <h4>Key Value Proposition</h4>
                                <textarea class="framework-input framework-textarea" placeholder="What unique value do you deliver?" data-key="vision-value"></textarea>
                            </div>
                            <div class="template-controls">
                                <button class="btn-save" onclick="saveTemplate('vision')">Save</button>
                                <button class="btn-reset" onclick="showResetConfirmation('vision')">Reset</button>
                                <button class="btn-export" onclick="exportTemplate(event, 'vision')">Export PNG</button>
                            </div>
                            <div class="reset-confirmation" id="reset-vision" style="display: none;">
                                <p>Are you sure you want to reset this template?</p>
                                <button class="btn-confirm" onclick="resetTemplate('vision')">Yes</button>
                                <button class="btn-cancel" onclick="hideResetConfirmation('vision')">Cancel</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="framework-card" data-framework-id="prfaq">
                        <div class="framework-header">
                            <h3 class="framework-title">PR/FAQ Builder</h3>
                            <p class="framework-subtitle">Work backwards from the customer experience</p>
                        </div>
                        <div class="framework-body">
                            <div class="template-explanation">
                                <div class="explanation-section">
                                    <h4>What this is</h4>
                                    <p>A press release and FAQ written before building anything, popularized by Amazon's "working backwards" method.</p>
                                </div>
                                <div class="explanation-section">
                                    <h4>Why it's helpful</h4>
                                    <p>Forces you to think from the customer's perspective and anticipate hard questions before writing code.</p>
                                </div>
                                <div class="explanation-section">
                                    <h4>Common pitfalls</h4>
                                    <p>Writing marketing fluff instead of clear customer benefits, or being too vague about the actual value delivered.</p>
                                </div>
                            </div>
                            <div class="editable-template">
                                <h4>Headline</h4>
                                <input type="text" class="framework-input" placeholder="Write your product launch headline..." data-key="prfaq-headline" />
                                <h4>Customer Problem</h4>
                                <textarea class="framework-input framework-textarea" placeholder="What problem does this solve for customers?" data-key="prfaq-problem"></textarea>
                                <h4>Key Benefit</h4>
                                <input type="text" class="framework-input" placeholder="What's the #1 benefit customers will get?" data-key="prfaq-benefit" />
                            </div>
                            <div class="template-controls">
                                <button class="btn-save" onclick="saveTemplate('prfaq')">Save</button>
                                <button class="btn-reset" onclick="showResetConfirmation('prfaq')">Reset</button>
                                <button class="btn-export" onclick="exportTemplate(event, 'prfaq')">Export PNG</button>
                            </div>
                            <div class="reset-confirmation" id="reset-prfaq" style="display: none;">
                                <p>Are you sure you want to reset this template?</p>
                                <button class="btn-confirm" onclick="resetTemplate('prfaq')">Yes</button>
                                <button class="btn-cancel" onclick="hideResetConfirmation('prfaq')">Cancel</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="framework-card" data-framework-id="okrs">
                        <div class="framework-header">
                            <h3 class="framework-title">OKR Planner</h3>
                            <p class="framework-subtitle">Set ambitious goals and track progress</p>
                        </div>
                        <div class="framework-body">
                            <div class="template-explanation">
                                <div class="explanation-section">
                                    <h4>What this is</h4>
                                    <p>Objectives (qualitative goals) paired with Key Results (quantitative measures) to drive focus and alignment.</p>
                                </div>
                                <div class="explanation-section">
                                    <h4>Done right looks like</h4>
                                    <p>Objectives inspire action, Key Results are measurable and time-bound, and the team knows exactly what success means.</p>
                                </div>
                            </div>
                            <div class="editable-template">
                                <h4>Objective (Qualitative Goal)</h4>
                                <input type="text" class="framework-input" placeholder="What do you want to achieve?" data-key="okr-objective" />
                                <h4>Key Result 1 (Measurable)</h4>
                                <input type="text" class="framework-input" placeholder="How will you measure success?" data-key="okr-kr1" />
                                <h4>Key Result 2 (Measurable)</h4>
                                <input type="text" class="framework-input" placeholder="What's another key metric?" data-key="okr-kr2" />
                            </div>
                            <div class="template-controls">
                                <button class="btn-save" onclick="saveTemplate('okrs')">Save</button>
                                <button class="btn-reset" onclick="showResetConfirmation('okrs')">Reset</button>
                                <button class="btn-export" onclick="exportTemplate(event, 'okrs')">Export PNG</button>
                            </div>
                            <div class="reset-confirmation" id="reset-okrs" style="display: none;">
                                <p>Are you sure you want to reset this template?</p>
                                <button class="btn-confirm" onclick="resetTemplate('okrs')">Yes</button>
                                <button class="btn-cancel" onclick="hideResetConfirmation('okrs')">Cancel</button>
                            </div>
                        </div>
                    </div>

                    <div class="framework-card full-width" data-framework-id="prioritization">
                        <div class="framework-header">
                            <h3 class="framework-title">Prioritization Framework</h3>
                            <p class="framework-subtitle">Use weighted scoring to prioritize initiatives objectively</p>
                        </div>
                        <div class="framework-body">
                            <div class="template-explanation">
                                <div class="explanation-section">
                                    <h4>What this is</h4>
                                    <p>A flexible prioritization framework that uses weighted scoring across four dimensions: Opportunity, Customer, Feasibility, and Strategic Value.</p>
                                </div>
                                <div class="explanation-section">
                                    <h4>How to use</h4>
                                    <p>For each initiative, select a score from 1-4 for each category. The total score will be calculated automatically based on the predefined weights.</p>
                                </div>
                            </div>
                            <div class="editable-template" id="prioritization-template">
                                <div class="prioritization-grid">
                                    <div class="priority-item">
                                        <label>Initiative Name</label>
                                        <input type="text" class="framework-input" placeholder="e.g., New feature, tech debt..." data-key="prio-name" />
                                    </div>
                                    <div class="priority-item">
                                        <label>Opportunity (35%)</label>
                                        <select class="framework-input priority-score" data-key="prio-opp">
                                            <option value="1">1 - Low</option>
                                            <option value="2">2 - Medium</option>
                                            <option value="3">3 - High</option>
                                            <option value="4">4 - Very High</option>
                                        </select>
                                    </div>
                                    <div class="priority-item">
                                        <label>Customer (20%)</label>
                                        <select class="framework-input priority-score" data-key="prio-cust">
                                            <option value="1">1 - Low</option>
                                            <option value="2">2 - Medium</option>
                                            <option value="3">3 - High</option>
                                            <option value="4">4 - Very High</option>
                                        </select>
                                    </div>
                                    <div class="priority-item">
                                        <label>Feasibility (10%)</label>
                                        <select class="framework-input priority-score" data-key="prio-feas">
                                            <option value="1">1 - Low</option>
                                            <option value="2">2 - Medium</option>
                                            <option value="3">3 - High</option>
                                            <option value="4">4 - Very High</option>
                                        </select>
                                    </div>
                                    <div class="priority-item">
                                        <label>Strategy (35%)</label>
                                        <select class="framework-input priority-score" data-key="prio-strat">
                                            <option value="1">1 - Low</option>
                                            <option value="2">2 - Medium</option>
                                            <option value="3">3 - High</option>
                                            <option value="4">4 - Very High</option>
                                        </select>
                                    </div>
                                    <div class="priority-item-score">
                                        <h4>Total Score</h4>
                                        <div class="total-score" id="total-score">1.00</div>
                                    </div>
                                </div>
                            </div>
                             <div class="template-controls">
                                <button class="btn-save" onclick="saveTemplate('prioritization')">Save</button>
                                <button class="btn-reset" onclick="showResetConfirmation('prioritization')">Reset</button>
                                <button class="btn-export" onclick="exportTemplate(event, 'prioritization')">Export PNG</button>
                            </div>
                            <div class="reset-confirmation" id="reset-prioritization" style="display: none;">
                                <p>Are you sure you want to reset this template?</p>
                                <button class="btn-confirm" onclick="resetTemplate('prioritization')">Yes</button>
                                <button class="btn-cancel" onclick="hideResetConfirmation('prioritization')">Cancel</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="framework-card full-width" data-framework-id="lean-canvas">
                        <div class="framework-header">
                            <h3 class="framework-title">Lean Product Canvas</h3>
                            <p class="framework-subtitle">By Jeff Gothelf - Systematic approach to product discovery</p>
                        </div>
                        <div class="framework-body">
                            <div class="template-explanation canvas-explanation">
                                <div class="explanation-grid">
                                    <div class="explanation-section">
                                        <h4>What this is</h4>
                                        <p>Jeff Gothelf's systematic framework for turning product assumptions into testable hypotheses.</p>
                                    </div>
                                    <div class="explanation-section">
                                        <h4>Why it's helpful</h4>
                                        <p>Prevents building features nobody wants by forcing you to identify and test your riskiest assumptions first.</p>
                                    </div>
                                    <div class="explanation-section">
                                        <h4>When to use</h4>
                                        <p>During discovery phase when exploring new features, products, or when validating product-market fit.</p>
                                    </div>
                                    <div class="explanation-section">
                                        <h4>How to use</h4>
                                        <p>Start with Business Problem (1), identify Users (2) and their outcomes (3), then systematically work through each section.</p>
                                    </div>
                                </div>
                            </div>
                            <div class="lean-canvas-grid">
                                <div class="canvas-section span-3">
                                    <h5>1. Business Problem</h5>
                                    <textarea class="canvas-input" placeholder="What is the most important problem your business needs to focus on right now?" data-key="canvas-problem"></textarea>
                                </div>
                                <div class="canvas-section span-2">
                                    <h5>2. Users</h5>
                                    <textarea class="canvas-input" placeholder="Which users and customers should you focus on first? Who buys? Who uses? Who configures?" data-key="canvas-users"></textarea>
                                </div>
                                <div class="canvas-section span-2">
                                    <h5>3. User Outcomes & Benefits (JTBD)</h5>
                                    <textarea class="canvas-input" placeholder="Why would users seek out your product? What benefit would they gain? What job are they trying to do?" data-key="canvas-outcomes"></textarea>
                                </div>
                                <div class="canvas-section span-3">
                                    <h5>4. Solutions</h5>
                                    <textarea class="canvas-input" placeholder="What can we make that will solve our business problem and meet customer needs? List product, feature, or enhancement ideas." data-key="canvas-solutions"></textarea>
                                </div>
                                <div class="canvas-section span-2">
                                    <h5>5. Business Outcomes</h5>
                                    <textarea class="canvas-input" placeholder="How will you know you solved the business problem? What will you measure? (Who does what by how much)" data-key="canvas-business-outcomes"></textarea>
                                </div>
                                <div class="canvas-section span-5">
                                    <h5>6. Hypotheses</h5>
                                    <textarea class="canvas-input" placeholder='Combine assumptions from boxes 2-5: "We believe that [business outcome] will be achieved if [user] attains [benefit] with [feature]."' data-key="canvas-hypotheses"></textarea>
                                </div>
                                <div class="canvas-section span-2">
                                    <h5>7. What's the most important thing we need to learn first?</h5>
                                    <textarea class="canvas-input" placeholder="Select hypothesis from Box 6 to test first. What's the riskiest assumption?" data-key="canvas-learn-first"></textarea>
                                </div>
                                <div class="canvas-section span-3">
                                    <h5>8. What's the least amount of work to learn the next most important thing?</h5>
                                    <textarea class="canvas-input" placeholder="Design experiments to learn quickly if your riskiest assumption is true. What could you learn in 1 day/week/month?" data-key="canvas-experiments"></textarea>
                                </div>
                            </div>
                            <div class="template-controls">
                                <button class="btn-save" onclick="saveTemplate('lean-canvas')">Save</button>
                                <button class="btn-reset" onclick="showResetConfirmation('lean-canvas')">Reset</button>
                                <button class="btn-export" onclick="exportTemplate(event, 'lean-canvas')">Export PNG</button>
                            </div>
                            <div class="reset-confirmation" id="reset-lean-canvas" style="display: none;">
                                <p>Are you sure you want to reset this template?</p>
                                <button class="btn-confirm" onclick="resetTemplate('lean-canvas')">Yes</button>
                                <button class="btn-cancel" onclick="hideResetConfirmation('lean-canvas')">Cancel</button>
                            </div>
                            <div class="canvas-attribution">
                                <small>Canvas created by <strong>Jeff Gothelf</strong> • Download original at: <a href="https://www.senseandrespond.co/the-lean-product-canvas" target="_blank">senseandrespond.co</a></small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="resources" class="resources-section">
            <div class="container">
                <h2 class="section-title">PM Resource Library</h2>
                <p class="section-subtitle">Curated resources, templates, and inspiration from the best in product management</p>
                
                <div class="resource-categories">
                    <div class="resource-tab-nav">
                        <button class="resource-tab active" data-category="templates">📋 Templates</button>
                        <button class="resource-tab" data-category="books">📚 Essential Reading</button>
                        <button class="resource-tab" data-category="tools">🛠️ Tools & Software</button>
                        <button class="resource-tab" data-category="communities">👥 Communities</button>
                    </div>
                    
                    <div class="resource-content">
                        <div class="resource-category-content active" data-category="templates">
                            <div class="resource-grid">
                                <div class="resource-card downloadable">
                                    <div class="resource-icon">📊</div>
                                    <h4>Product Requirements Document (PRD)</h4>
                                    <p>Comprehensive template for documenting product specifications and requirements</p>
                                    <div class="resource-meta">
                                        <span class="resource-type">Google Docs</span>
                                        <span class="resource-downloads">2.3k downloads</span>
                                    </div>
                                    <button class="download-btn">Download Template</button>
                                </div>
                                <div class="resource-card downloadable">
                                    <div class="resource-icon">🎯</div>
                                    <h4>User Story Mapping Canvas</h4>
                                    <p>Visual template for mapping user journeys and identifying key features</p>
                                    <div class="resource-meta">
                                        <span class="resource-type">Miro Board</span>
                                        <span class="resource-downloads">1.8k downloads</span>
                                    </div>
                                    <button class="download-btn">Download Template</button>
                                </div>
                                <div class="resource-card downloadable">
                                    <div class="resource-icon">📈</div>
                                    <h4>Product Metrics Dashboard</h4>
                                    <p>Ready-to-use analytics dashboard template with key product KPIs</p>
                                    <div class="resource-meta">
                                        <span class="resource-type">Google Sheets</span>
                                        <span class="resource-downloads">3.1k downloads</span>
                                    </div>
                                    <button class="download-btn">Download Template</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="resource-category-content" data-category="books">
                            <div class="roadmap-vertical">
                                <!-- Swimlane 1: Foundations -->
                                <div class="roadmap-swimlane-vertical">
                                    <div class="swimlane-header">
                                        <div class="swimlane-icon">🧭</div>
                                        <h3>Q1: Foundations & Mindset</h3>
                                    </div>
                                    <div class="book-cards-grid">
                                        <div class="book-card-vertical">
                                            <h4>Think Again</h4>
                                            <p class="author">by Adam Grant</p>
                                            <p class="okr-title">Objective:</p>
                                            <ul class="okr-list"><li>Build habit of questioning assumptions.</li></ul>
                                        </div>
                                        <div class="book-card-vertical">
                                            <h4>Escaping the Build Trap</h4>
                                            <p class="author">by Melissa Perri</p>
                                            <p class="okr-title">Objective:</p>
                                            <ul class="okr-list"><li>Shift focus from outputs to outcomes.</li></ul>
                                        </div>
                                        <div class="book-card-vertical">
                                            <h4>Inspired</h4>
                                            <p class="author">by Marty Cagan</p>
                                            <p class="okr-title">Objective:</p>
                                            <ul class="okr-list"><li>Learn the framework for great product practice.</li></ul>
                                        </div>
                                    </div>
                                </div>
                                <!-- Swimlane 2: Discovery & Strategy -->
                                <div class="roadmap-swimlane-vertical">
                                    <div class="swimlane-header">
                                        <div class="swimlane-icon">🗺️</div>
                                        <h3>Q2: Discovery & Strategy</h3>
                                    </div>
                                    <div class="book-cards-grid">
                                        <div class="book-card-vertical">
                                            <h4>The Lean Product Playbook</h4>
                                            <p class="author">by Dan Olsen</p>
                                            <p class="okr-title">Objective:</p>
                                            <ul class="okr-list"><li>Master the product-market fit process.</li></ul>
                                        </div>
                                        <div class="book-card-vertical">
                                            <h4>Thinking in Systems</h4>
                                            <p class="author">by Donella Meadows</p>
                                            <p class="okr-title">Objective:</p>
                                            <ul class="okr-list"><li>Understand strategic leverage points.</li></ul>
                                        </div>
                                        <div class="book-card-vertical">
                                            <h4>The Mom Test</h4>
                                            <p class="author">by Rob Fitzpatrick</p>
                                            <p class="okr-title">Objective:</p>
                                            <ul class="okr-list"><li>Improve customer interview skills.</li></ul>
                                        </div>
                                    </div>
                                </div>
                                <!-- Swimlane 3: Execution & Leadership -->
                                <div class="roadmap-swimlane-vertical">
                                    <div class="swimlane-header">
                                        <div class="swimlane-icon">🚀</div>
                                        <h3>Q3: Execution & Leadership</h3>
                                    </div>
                                    <div class="book-cards-grid">
                                        <div class="book-card-vertical">
                                            <h4>Empowered</h4>
                                            <p class="author">by Marty Cagan & Chris Jones</p>
                                            <p class="okr-title">Objective:</p>
                                            <ul class="okr-list"><li>Learn to build effective team structures.</li></ul>
                                        </div>
                                        <div class="book-card-vertical">
                                            <h4>High Output Management</h4>
                                            <p class="author">by Andy Grove</p>
                                            <p class="okr-title">Objective:</p>
                                            <ul class="okr-list"><li>Lead and scale teams under pressure.</li></ul>
                                        </div>
                                        <div class="book-card-vertical">
                                            <h4>Multipliers</h4>
                                            <p class="author">by Liz Wiseman</p>
                                            <p class="okr-title">Objective:</p>
                                            <ul class="okr-list"><li>Develop leadership and influence skills.</li></ul>
                                        </div>
                                    </div>
                                </div>
                                <!-- Swimlane 4: Advanced Skills -->
                                <div class="roadmap-swimlane-vertical">
                                    <div class="swimlane-header">
                                        <div class="swimlane-icon">🧠</div>
                                        <h3>Q4: Advanced Skills</h3>
                                    </div>
                                    <div class="book-cards-grid">
                                        <div class="book-card-vertical">
                                            <h4>Originals</h4>
                                            <p class="author">by Adam Grant</p>
                                            <p class="okr-title">Objective:</p>
                                            <ul class="okr-list"><li>Pitch one new idea using new knowledge.</li></ul>
                                        </div>
                                        <div class="book-card-vertical">
                                            <h4>Crossing the Chasm</h4>
                                            <p class="author">by Geoffrey A. Moore</p>
                                            <p class="okr-title">Objective:</p>
                                            <ul class="okr-list"><li>Define your product's "beachhead" market.</li></ul>
                                        </div>
                                        <div class="book-card-vertical">
                                            <h4>The Hard Thing About Hard Things</h4>
                                            <p class="author">by Ben Horowitz</p>
                                            <p class="okr-title">Objective:</p>
                                            <ul class="okr-list"><li>Make one tough but necessary decision.</li></ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="resource-category-content" data-category="tools">
                            <div class="tools-grid">
                                <div class="tool-recommendation">
                                    <div class="tool-logo">🎨</div>
                                    <h4>Figma</h4>
                                    <p>Collaborative design and prototyping</p>
                                    <div class="tool-pricing">Free - $45/month</div>
                                    <div class="tool-rating">★★★★★</div>
                                </div>
                                <div class="tool-recommendation">
                                    <div class="tool-logo">📊</div>
                                    <h4>Amplitude</h4>
                                    <p>Product analytics and user behavior tracking</p>
                                    <div class="tool-pricing">Free - $995/month</div>
                                    <div class="tool-rating">★★★★☆</div>
                                </div>
                                <div class="tool-recommendation">
                                    <div class="tool-logo">🗂️</div>
                                    <h4>Linear</h4>
                                    <p>Issue tracking and project management</p>
                                    <div class="tool-pricing">$8 - $16/month</div>
                                    <div class="tool-rating">★★★★★</div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="resource-category-content" data-category="communities">
                            <div class="communities-grid">
                                <div class="community-card">
                                    <div class="community-icon">💬</div>
                                    <h4>Product Manager HQ</h4>
                                    <p>45k+ product managers sharing insights and best practices</p>
                                    <div class="community-stats">
                                        <span>45,892 members</span>
                                        <span>Very Active</span>
                                    </div>
                                    <button class="join-btn">Join Community</button>
                                </div>
                                <div class="community-card">
                                    <div class="community-icon">🎯</div>
                                    <h4>Mind the Product</h4>
                                    <p>Global community with events, content, and career resources</p>
                                    <div class="community-stats">
                                        <span>200k+ members</span>
                                        <span>Events & Content</span>
                                    </div>
                                    <button class="join-btn">Join Community</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="ai-assistant" class="ai-assistant-section">
            <div class="container">
                <div class="ai-assistant-card">
                    <div class="ai-content">
                        <div class="ai-avatar">🤖</div>
                        <div class="ai-text">
                            <h3>Meet Your AI Product Assistant</h3>
                            <p>Get personalized advice, framework recommendations, and instant answers to your product questions. Trained on the latest PM best practices and industry insights.</p>
                            <div class="ai-capabilities">
                                <span class="capability">📊 Framework Selection</span>
                                <span class="capability">🎯 Strategy Review</span>
                                <span class="capability">💡 Problem Solving</span>
                                <span class="capability">📈 Metrics Guidance</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="ai-chat-interface">
                        <div class="chat-header">
                            <h4>Ask Your PM Assistant</h4>
                            <div class="status-indicator">🟢 Online</div>
                        </div>
                        
                        <div class="chat-messages">
                            <div class="ai-message">
                                <div class="message-avatar">🤖</div>
                                <div class="message-content">
                                    Hi! I'm here to help you with product management challenges. What would you like to work on today?
                                </div>
                            </div>
                        </div>
                        
                        <div class="chat-input-area">
                            <input type="text" id="ai-input" placeholder="Ask about frameworks, metrics, strategy..." />
                            <button class="send-btn" onclick="sendMessage()">Send</button>
                        </div>
                        
                        <div class="quick-questions">
                            <div class="question-category">
                                <h6>Define Phase</h6>
                                <button class="quick-q" onclick="askQuestion('What is a North Star Metric?')">What is a North Star Metric?</button>
                                <button class="quick-q" onclick="askQuestion('Should I build a roadmap?')">Should I build a roadmap?</button>
                            </div>
                            <div class="question-category">
                                <h6>Discover Phase</h6>
                                <button class="quick-q" onclick="askQuestion('How do I use the Lean Product Canvas?')">How do I use the Lean Product Canvas?</button>
                                <button class="quick-q" onclick="askQuestion('What makes a good hypothesis?')">What makes a good hypothesis?</button>
                                <button class="quick-q" onclick="askQuestion('How to validate assumptions?')">How to validate assumptions?</button>
                                <button class="quick-q" onclick="askQuestion('How do I know which assumption to test first?')">Which assumption to test first?</button>
                            </div>
                            <div class="question-category">
                                <h6>Deliver Phase</h6>
                                <button class="quick-q" onclick="askQuestion('How do I prioritize features?')">How do I prioritize features?</button>
                                <button class="quick-q" onclick="askQuestion('What metrics should I track?')">What metrics should I track?</button>
                            </div>
                            <div class="question-category">
                                <h6>Just for Fun</h6>
                                <button class="quick-q joke-btn" onclick="askQuestion('Tell me a PM joke')">Tell me a PM joke</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <footer class="footer-section">
            <div class="container">
                <div class="footer-content">
                    <div class="footer-main">
                        <h3>Product Playbook by Pablo Munoz</h3>
                        <p>Empowering product managers to build products that customers love and businesses thrive on.</p>
                        <div class="footer-social">
                            <a href="#" class="social-link">📧 Newsletter</a>
                            <a href="#" class="social-link">🐦 Twitter</a>
                            <a href="#" class="social-link">💼 LinkedIn</a>
                        </div>
                    </div>
                    
                    <div class="footer-links">
                        <div class="link-group">
                            <h4>Frameworks</h4>
                            <a href="#frameworks">Vision Canvas</a>
                            <a href="#frameworks">PR/FAQ</a>
                            <a href="#frameworks">OKRs</a>
                            <a href="#frameworks">Lean Canvas</a>
                        </div>
                        <div class="link-group">
                            <h4>Resources</h4>
                            <a href="#resources">Templates</a>
                            <a href="#resources">Books</a>
                            <a href="#resources">Tools</a>
                            <a href="#resources">Communities</a>
                        </div>
                        <div class="link-group">
                            <h4>Learn</h4>
                            <a href="#phases">Product Journey</a>
                            <a href="#risks">Four Big Risks</a>
                            <a href="#frameworks">Interactive Frameworks</a>
                        </div>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <p>&copy; 2025 Product Playbook by Pablo Munoz. Built with ❤️ for the PM community.</p>
                    <div class="credits">
                        <p><strong>Framework Credits:</strong> Four Big Risks by Marty Cagan (SVPG) • Lean Product Canvas by Jeff Gothelf • Prioritization Framework by Pablo Munoz</p>
                        <p><strong>Inspired by:</strong> Melissa Perri, Jeff Gothelf, Marty Cagan, and the broader PM community</p>
                    </div>
                </div>
            </div>
        </footer>
    </main>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoVBL5gD5CMbaY9ojK0z75eDLRMA0Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
        
        // Sidebar Navigation
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('main > section');

        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (scrollY >= (sectionTop - 60)) {
                    current = section.getAttribute('id');
                }
            });

            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('data-section') === current) {
                    link.classList.add('active');
                }
            });
        });
        
        // AI Assistant functionality
        function sendMessage() {
            const input = document.getElementById('ai-input');
            const message = input.value.trim();
            if (message) {
                addUserMessage(message);
                input.value = '';
                // Add a "typing" indicator for the AI for better UX
                addAIMessage("Thinking...", true);
                generateAIResponse(message);
            }
        }

        function askQuestion(question) {
            document.getElementById('ai-input').value = question;
            sendMessage();
        }

        function addUserMessage(message) {
            const messagesContainer = document.querySelector('.chat-messages');
            const userMessage = document.createElement('div');
            userMessage.className = 'user-message';
            userMessage.innerHTML = `<div class="message-content user-content">${message}</div><div class="message-avatar user-avatar">👤</div>`;
            messagesContainer.appendChild(userMessage);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        function addAIMessage(message, isTyping = false) {
            const messagesContainer = document.querySelector('.chat-messages');
            const existingTyping = document.getElementById('typing-indicator');
            if (existingTyping) {
                existingTyping.remove();
            }

            const aiMessage = document.createElement('div');
            aiMessage.className = 'ai-message';

            // Format the message to render newlines from the backend correctly
            const formattedMessage = message.replace(/\n/g, '<br/>');

            aiMessage.innerHTML = `<div class="message-avatar">🤖</div><div class="message-content">${formattedMessage}</div>`;

            if (isTyping) {
                aiMessage.id = 'typing-indicator';
            }

            messagesContainer.appendChild(aiMessage);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        async function generateAIResponse(userMessage) {
            const apiUrl = 'http://127.0.0.1:5000/api/chat';

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ message: userMessage }),
                });

                if (!response.ok) {
                    throw new Error(`Server responded with status: ${response.status}`);
                }

                const data = await response.json();
                const typingIndicator = document.getElementById('typing-indicator');

                // Update the "Thinking..." message with the actual response
                if (typingIndicator) {
                    const contentDiv = typingIndicator.querySelector('.message-content');
                    if (contentDiv) {
                        contentDiv.innerHTML = data.response.replace(/\n/g, '<br/>');
                    }
                    typingIndicator.id = ''; // Remove the ID to mark it as a final message
                } else {
                    // Fallback if the indicator was somehow removed
                    addAIMessage(data.response);
                }

            } catch (error) {
                console.error('Error fetching AI response:', error);
                const errorMessage = "Sorry, I'm having trouble connecting to my brain. Please make sure the local backend server is running and try again.";
                const typingIndicator = document.getElementById('typing-indicator');

                if (typingIndicator) {
                    const contentDiv = typingIndicator.querySelector('.message-content');
                    if (contentDiv) {
                        contentDiv.innerHTML = errorMessage;
                    }
                    typingIndicator.id = '';
                } else {
                    addAIMessage(errorMessage);
                }
            }
        }
        
        // Resource tabs functionality
        document.querySelectorAll('.resource-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                document.querySelectorAll('.resource-tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.resource-category-content').forEach(c => c.classList.remove('active'));
                this.classList.add('active');
                document.querySelector(`.resource-category-content[data-category="${this.dataset.category}"]`).classList.add('active');
            });
        });
        
        // Download functionality simulation
        document.querySelectorAll('.download-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                this.textContent = 'Downloading...';
                setTimeout(() => {
                    this.textContent = '✓ Downloaded';
                    setTimeout(() => { this.textContent = 'Download Template'; }, 2000);
                }, 1500);
            });
        });
        
        // Community join functionality
        document.querySelectorAll('.join-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                this.textContent = 'Joined! ✓';
                this.style.background = '#10b981';
                this.disabled = true;
            });
        });
        
        // Template management functions
        function saveTemplate(templateId) {
            const inputs = document.querySelectorAll(`[data-key^="${templateId}"]`);
            inputs.forEach(input => {
                const key = `PMPlaybook.${input.dataset.key}`;
                localStorage.setItem(key, input.value);
            });
            const saveBtn = event.target;
            saveBtn.textContent = 'Saved!';
            saveBtn.style.background = '#10b981';
            setTimeout(() => {
                saveBtn.textContent = 'Save';
                saveBtn.style.background = '#001F3F';
            }, 2000);
        }
        
        function showResetConfirmation(templateId) {
            document.getElementById(`reset-${templateId}`).style.display = 'block';
        }
        
        function hideResetConfirmation(templateId) {
            document.getElementById(`reset-${templateId}`).style.display = 'none';
        }
        
        function resetTemplate(templateId) {
            const inputs = document.querySelectorAll(`[data-key^="${templateId}"]`);
            inputs.forEach(input => {
                const key = `PMPlaybook.${input.dataset.key}`;
                localStorage.removeItem(key);
                input.value = '';
            });
            hideResetConfirmation(templateId);
            const card = document.querySelector(`[data-framework-id="${templateId}"]`);
            card.classList.remove('used');
            localStorage.removeItem(`PMPlaybook.used.${templateId}`);
        }
        
        function exportTemplate(event, templateId) {
            const exportBtn = event.target;
            const card = exportBtn.closest('.framework-card');
            const title = card.querySelector('.framework-title').textContent.trim();
            const elementToExport = card.querySelector('.editable-template') || card.querySelector('.lean-canvas-grid');

            if (!elementToExport) return;

            exportBtn.textContent = 'Exporting...';
            exportBtn.disabled = true;

            html2canvas(elementToExport, {
                useCORS: true,
                allowTaint: true,
                backgroundColor: '#ffffff'
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `${title.replace(/ /g, '-')}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();

                exportBtn.textContent = 'Exported!';
                exportBtn.disabled = false;
                setTimeout(() => { exportBtn.textContent = 'Export PNG'; }, 2000);
            }).catch(err => {
                console.error('Export failed:', err);
                exportBtn.textContent = 'Error!';
                setTimeout(() => { exportBtn.textContent = 'Export PNG'; }, 3000);
            }).finally(() => {
                exportBtn.disabled = false;
            });
        }

        function calculatePriorityScore() {
            const oppEl = document.querySelector('[data-key="prio-opp"]');
            const custEl = document.querySelector('[data-key="prio-cust"]');
            const feasEl = document.querySelector('[data-key="prio-feas"]');
            const stratEl = document.querySelector('[data-key="prio-strat"]');

            if(!oppEl) return; // Don't run if the element isn't on the page

            const opp = parseFloat(oppEl.value) || 0;
            const cust = parseFloat(custEl.value) || 0;
            const feas = parseFloat(feasEl.value) || 0;
            const strat = parseFloat(stratEl.value) || 0;

            const score = (opp * 0.35) + (cust * 0.20) + (feas * 0.10) + (strat * 0.35);

            const scoreElement = document.getElementById('total-score');
            if (scoreElement) {
                scoreElement.textContent = score.toFixed(2);
            }
        }
        
        // Load saved data on page load
        function loadSavedData() {
            const inputs = document.querySelectorAll('[data-key]');
            inputs.forEach(input => {
                const key = `PMPlaybook.${input.dataset.key}`;
                const savedValue = localStorage.getItem(key);
                if (savedValue) {
                    input.value = savedValue;
                }
            });
        }

        function checkUsedFrameworks() {
            const frameworkCards = document.querySelectorAll('.framework-card');
            frameworkCards.forEach(card => {
                const frameworkId = card.dataset.frameworkId;
                if (frameworkId) {
                    const isUsed = localStorage.getItem(`PMPlaybook.used.${frameworkId}`);
                    if (isUsed === 'true') {
                        card.classList.add('used');
                    }
                }
            });
        }
        
        // Auto-save functionality
        function setupAutoSave() {
            const inputs = document.querySelectorAll('[data-key]');
            inputs.forEach(input => {
                input.addEventListener('input', function() {
                    const key = `PMPlaybook.${this.dataset.key}`;
                    localStorage.setItem(key, this.value);
                    
                    const frameworkCard = this.closest('.framework-card');
                    if (frameworkCard) {
                        const frameworkId = frameworkCard.dataset.frameworkId;
                        if(frameworkId) {
                           localStorage.setItem(`PMPlaybook.used.${frameworkId}`, 'true');
                           frameworkCard.classList.add('used');
                        }
                    }
                });
            });
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            loadSavedData();
            setupAutoSave();
            checkUsedFrameworks();
            calculatePriorityScore();
            document.querySelectorAll('.priority-score').forEach(select => {
                select.addEventListener('change', calculatePriorityScore);
            });
        });
        
        document.getElementById('ai-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });
    </script>
</body>
</html>
