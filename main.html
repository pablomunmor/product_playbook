<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Manager's Playbook</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoVBL5gI9kLmbG0C+wFfsFPbAx0eCw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <style>
        :root {
            --marine-blue: #001F3F;
            --white: #FFFFFF;
            --light-gray: #f0f2f5;
            --text-color: #333;
            --border-color: #e0e0e0;
        }

        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            background-color: var(--light-gray);
            color: var(--text-color);
            line-height: 1.6;
        }

        .container {
            display: flex;
        }

        .sidebar {
            width: 250px;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            background-color: var(--white);
            padding: 2rem 1rem;
            border-right: 1px solid var(--border-color);
            overflow-y: auto;
        }

        .sidebar h2 {
            color: var(--marine-blue);
            font-weight: 700;
            margin-top: 0;
        }

        .sidebar nav ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .sidebar nav li a {
            display: block;
            color: var(--marine-blue);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .sidebar nav li a:hover,
        .sidebar nav li a.active {
            background-color: var(--light-gray);
        }

        .content {
            margin-left: 250px;
            padding: 2rem;
            width: calc(100% - 250px);
        }

        .card {
            background-color: var(--white);
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 2rem;
            padding: 1.5rem;
        }

        .card-header {
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 1rem;
            margin-bottom: 1rem;
        }

        .card-header h3 {
            margin: 0;
            color: var(--marine-blue);
        }

        h1, h2, h3, h4, h5, h6 {
            color: var(--marine-blue);
            font-weight: 600;
        }

        button {
            background-color: var(--marine-blue);
            color: var(--white);
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            transition: background-color 0.3s;
        }

        button:hover {
            opacity: 0.9;
        }

        textarea, input, select {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            font-family: 'Inter', sans-serif;
        }

        .editable {
            background-color: #f8f9fa;
            padding: 1rem;
            border-radius: 5px;
            border: 1px dashed var(--border-color);
        }

        #lifecycle-diagram {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 2rem 0;
            position: relative;
        }

        #lifecycle-diagram::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background-color: var(--border-color);
            transform: translateY(-50%);
        }

        .lifecycle-phase {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            z-index: 1;
        }

        .lifecycle-dot {
            width: 20px;
            height: 20px;
            background-color: var(--white);
            border: 2px solid var(--marine-blue);
            border-radius: 50%;
            margin-bottom: 0.5rem;
            transition: background-color 0.3s;
        }

        .lifecycle-phase:hover .lifecycle-dot {
            background-color: var(--marine-blue);
        }

        #prioritization-framework form {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1rem;
        }

        #prioritization-framework label {
            font-weight: 500;
        }

        .canvas-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            padding: 1rem;
            border-radius: 5px;
            background-color: #f8f9fa;
        }

        .canvas-cell {
            background-color: var(--white);
            padding: 1rem;
            border-radius: 5px;
            border: 1px solid var(--border-color);
        }

        .canvas-cell label {
            font-weight: 600;
            margin-bottom: 0.5rem;
            display: block;
            color: var(--marine-blue);
        }

        .canvas-cell textarea {
            height: 120px;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <aside class="sidebar">
            <h2>PM's Playbook</h2>
            <nav>
                <ul>
                    <li><a href="#intro" class="active">Intro</a></li>
                    <li><a href="#phase1">Phase 1: Definition</a></li>
                    <li><a href="#phase2">Phase 2: Discovery</a></li>
                    <li><a href="#phase3">Phase 3: Delivery</a></li>
                    <li><a href="#phase4">Phase 4: Learning</a></li>
                </ul>
            </nav>
        </aside>
        <main class="content">
            <section id="intro">
                <h1>Product Manager's Playbook</h1>
                <div class="card">
                    <div class="card-header">
                        <h3>Welcome to the PM's Playbook!</h3>
                    </div>
                    <p>This is an interactive, self-contained tool for Product Managers of all levels. It's designed to be both a learning resource and a practical, day-to-day workbench. The frameworks within are inspired by the teachings of industry leaders like Marty Cagan (SVPG), Melissa Perri, and Jeff Gothelf.</p>
                </div>
                <div class="card" id="four-risks">
                    <div class="card-header">
                        <h3>The Four Big Risks</h3>
                    </div>
                    <p>Coined by Marty Cagan of the Silicon Valley Product Group (SVPG), these are the four fundamental questions every product team must address to be successful. You'll see these concepts woven throughout the templates in this playbook.</p>
                    <ul>
                        <li><strong>Value Risk:</strong> Will customers buy it or users choose to use it?</li>
                        <li><strong>Usability Risk:</strong> Can users figure out how to use it?</li>
                        <li><strong>Feasibility Risk:</strong> Can our engineers build what we need with the time, skills, and technology we have?</li>
                        <li><strong>Viability Risk:</strong> Will this solution work for our business? (e.g., financially, legally, etc.)</li>
                    </ul>
                </div>
                 <div class="card" id="lifecycle-diagram-card">
                    <div class="card-header">
                        <h3>The Product Lifecycle</h3>
                    </div>
                    <p>This diagram represents the iterative journey of product management, from defining a new idea to delivering it and learning from its impact. Click on a phase to jump to the relevant templates.</p>
                    <div id="lifecycle-diagram">
                        <!-- Diagram will be generated by JS -->
                    </div>
                </div>
            </section>

            <section id="phase1">
                <h2>Phase 1: Product Definition</h2>
                <div class="card" id="vision-strategy">
                    <div class="card-header"><h3>Vision & Strategy One-Pager</h3></div>
                    <h4>What this is</h4>
                    <p>A concise document that aligns the company on a product's direction. It's a foundational artifact that cascades from the company's mission down to specific objectives. This structure is inspired by the hierarchy described by product leaders and ensures every initiative has a clear purpose.</p>
                    <h4>Why it's helpful</h4>
                    <p>It forces clarity of thought and ensures that every feature we build is valuable (solves a customer need), viable (works for the business), usable (easy for users), and feasible (we can build it). It's the North Star for the product team.</p>
                    <h4>Editable Example: "Recipe Finder" App</h4>
                    <div class="editable">
                        <label><strong>Mission (The "Why"):</strong></label>
                        <textarea data-key="phase1.vision.mission" placeholder="e.g., To make home cooking accessible and enjoyable for everyone.">To make home cooking accessible and enjoyable for everyone.</textarea>

                        <label><strong>Vision (The "What"):</strong></label>
                        <textarea data-key="phase1.vision.vision" placeholder="e.g., To be the go-to app for finding and cooking recipes, personalized to your tastes and dietary needs.">To be the go-to app for finding and cooking recipes, personalized to your tastes and dietary needs.</textarea>

                        <label><strong>Strategy (The "How"):</strong></label>
                        <textarea data-key="phase1.vision.strategy" placeholder="e.g., 1. Build the largest, most accurate recipe database. 2. Create a seamless, personalized user experience. 3. Foster a community of home cooks.">1. Build the largest, most accurate recipe database.\n2. Create a seamless, personalized user experience.\n3. Foster a community of home cooks.</textarea>

                        <label><strong>Objectives (The measurable goals):</strong></label>
                        <textarea data-key="phase1.vision.objectives" placeholder="e.g., 1. Increase user engagement by 25% in 6 months. 2. Grow recipe database by 50% in 1 year. 3. Achieve a 4.5-star rating.">1. Increase user engagement (measured by weekly active users) by 25% in the next 6 months.\n2. Grow the recipe database by 50% in the next year through partnerships and user submissions.\n3. Achieve a 4.5-star rating in the app stores by improving performance and adding key features.</textarea>
                    </div>
                    <button class="export-btn">Export as PNG</button> <button class="reset-btn">Reset</button>
                </div>
                <div class="card" id="pr-faq">
                    <div class="card-header"><h3>PR/FAQ</h3></div>
                    <h4>What this is</h4>
                    <p>A PR/FAQ is a powerful tool used to "work backwards" from the customer, a practice famously evangelized by Amazon. You write a press release for a future product launch and a list of frequently asked questions from both customers and internal stakeholders. It's a fantastic way to pressure-test an idea before writing a single line of code.</p>
                    <h4>Why it's helpful</h4>
                    <p>It helps you think through the customer benefit, anticipate hard questions, and align the team on the "what" and "why." A great PR/FAQ ensures your product will be valuable and usable from the customer's perspective.</p>
                    <h4>Editable Example: "Recipe Finder" App</h4>
                    <div class="editable">
                        <label><strong>Press Release Headline:</strong></label>
                        <textarea data-key="phase1.prfaq.headline">Recipe-Finder App Launches 'Meal-Kit-Mode' to Turn Any Recipe into a Smart Shopping List</textarea>

                        <label><strong>Summary:</strong></label>
                        <textarea data-key="phase1.prfaq.summary">A new feature that helps users instantly create a shopping list from any recipe in the app, and even check for items they may already have at home.</textarea>

                        <label><strong>Customer FAQ 1: How does it work?</strong></label>
                        <textarea data-key="phase1.prfaq.faq1">It uses natural language processing to parse the ingredient list and automatically adds the items to a checklist. You can then customize the list before you shop.</textarea>

                        <label><strong>Internal FAQ 1: How does this support our objectives?</strong></label>
                        <textarea data-key="phase1.prfaq.faq2">This directly supports our objective to "Increase user engagement by 25%." By solving a major pain point in the cooking journey (shopping), we expect users to engage with our app more frequently.</textarea>
                    </div>
                    <button class="export-btn">Export as PNG</button> <button class="reset-btn">Reset</button>
                </div>
                <div class="card" id="roadmaps">
                    <div class="card-header"><h3>Roadmaps</h3></div>
                    <h4>What this is</h4>
                    <p>A product roadmap is a strategic document that communicates the high-level product strategy and how it will be achieved over time. As Melissa Perri teaches, a good roadmap should be focused on outcomes, not outputs. It should connect the work of the team to the objectives of the business.</p>
                    <h4>Editable Example</h4>
                    <div class="editable"><textarea data-key="phase1.roadmaps.content" placeholder="e.g., Now: Launch Meal-Kit-Mode (Objective: Increase Engagement). Next: Community Features (Objective: Foster Community). Later: International Expansion (Objective: Grow User Base)."></textarea></div>
                    <button class="export-btn">Export as PNG</button> <button class="reset-btn">Reset</button>
                </div>
            </section>

            <section id="phase2">
                <h2>Phase 2: Product Discovery</h2>
                <div class="card" id="lean-canvas">
                    <div class="card-header"><h3>Lean Product Canvas</h3></div>
                    <h4>What this is</h4>
                    <p>The Lean Product Canvas is a powerful tool for product discovery, adapted from the popular Business Model Canvas. It helps you break down a big idea into its core assumptions. This version is inspired by several modern canvases and focuses on the questions you need to answer to validate your idea.</p>
                    <h4>Why it's helpful</h4>
                    <p>It's a collaborative tool that helps teams align on the problem, solution, and key risks. As Jeff Gothelf, author of "Lean UX," advocates, it's about fostering a shared understanding. The goal is to identify your riskiest assumptions and turn them into testable hypotheses before you build anything. This is key to ensuring your product is valuable, usable, and feasible.</p>
                    <h4>Editable Example: "Recipe Finder" App</h4>
                    <div class="canvas-grid">
                        <div class="canvas-cell">
                            <label>1. Problem</label>
                            <textarea data-key="phase2.canvas.problem" placeholder="What problem are you solving? Who has it?">Home cooks struggle to decide what to cook daily and find shopping for ingredients tedious and time-consuming.</textarea>
                        </div>
                        <div class="canvas-cell">
                            <label>2. Actors / Customers</label>
                            <textarea data-key="phase2.canvas.actors" placeholder="Who are your target customers and users?">Busy professionals and parents who cook at home 3-5 times a week. They are tech-savvy but not expert chefs.</textarea>
                        </div>
                        <div class="canvas-cell">
                            <label>3. Solution</label>
                            <textarea data-key="phase2.canvas.solution" placeholder="What is your proposed solution?">A mobile app that provides personalized recipe suggestions and a one-click 'add to shopping list' feature.</textarea>
                        </div>
                        <div class="canvas-cell">
                            <label>4. Values / USP</label>
                            <textarea data-key="phase2.canvas.values" placeholder="What is the unique value proposition?">"Your personal meal planner and shopping assistant." We save you time and reduce food waste by simplifying the entire cooking process.</textarea>
                        </div>
                        <div class="canvas-cell">
                            <label>5. Hypothesis</label>
                            <textarea data-key="phase2.canvas.hypothesis" placeholder="What is the most critical hypothesis to test?">We believe that by providing a 'smart shopping list' feature, users will engage with our app at least once a week, proving it's a valuable part of their routine.</textarea>
                        </div>
                        <div class="canvas-cell">
                            <label>6. Risks</label>
                            <textarea data-key="phase2.canvas.risks" placeholder="What are the biggest risks? (Usability, Feasibility, Viability)">- Usability: Is the shopping list feature easy to use in a real grocery store?\n- Feasibility: Can we accurately parse ingredients from any online recipe?\n- Viability: Will users be willing to pay for premium features in the future?</textarea>
                        </div>
                         <div class="canvas-cell">
                            <label>7. KPIs / Key Metrics</label>
                            <textarea data-key="phase2.canvas.kpis" placeholder="How will you measure success?">- Activation: % of users who create a shopping list in their first week.\n- Engagement: # of shopping lists created per user per month.\n- Retention: 4-week retention rate.</textarea>
                        </div>
                        <div class="canvas-cell">
                            <label>8. Actions / Experiments</label>
                            <textarea data-key="phase2.canvas.actions" placeholder="What's the next action to de-risk your idea?">Build a clickable prototype of the shopping list feature and test it with 10 target users in a simulated shopping experience.</textarea>
                        </div>
                    </div>
                    <br>
                    <button class="export-btn">Export as PNG</button> <button class="reset-btn">Reset</button>
                </div>
                <div class="card" id="hypotheses-builder">
                    <div class="card-header"><h3>Hypotheses Builder</h3></div>
                    <h4>What this is</h4>
                    <p>A template to structure your assumptions into testable hypotheses. A common format is: "We believe that [building this feature] for [these people] will achieve [this outcome]. We will know this is true when we see [this metric change]."</p>
                    <h4>Editable Example</h4>
                    <div class="editable"><textarea data-key="phase2.hypotheses.content" placeholder="e.g., We believe that creating a smart shopping list for busy professionals will lead to higher weekly engagement. We'll know this is true when we see a 15% increase in weekly active users."></textarea></div>
                    <button class="export-btn">Export as PNG</button> <button class="reset-btn">Reset</button>
                </div>
            </section>

            <section id="phase3">
                <h2>Phase 3: Product Delivery</h2>
                <div class="card" id="okrs">
                    <div class="card-header"><h3>OKRs (Objectives & Key Results)</h3></div>
                    <h4>What this is</h4>
                    <p>OKRs are a goal-setting framework for companies, teams, and individuals. They are about setting ambitious goals and tracking progress. The structure is simple:
                        <ul>
                            <li><strong>Objectives</strong> are what you want to achieve. They should be ambitious, qualitative, and inspirational.</li>
                            <li><strong>Key Results</strong> are how you'll measure progress towards the Objective. They must be quantitative and measurable.</li>
                            <li><strong>Initiatives</strong> are the projects and tasks you will do to influence the Key Results. (h/t Jeff Gothelf).</li>
                        </ul>
                    </p>
                    <h4>Editable Example: "Recipe Finder" App</h4>
                    <div class="editable">
                        <label><strong>Objective:</strong></label>
                        <textarea data-key="phase3.okrs.objective">Make our app an indispensable part of our users' weekly cooking routine.</textarea>

                        <label><strong>Key Result 1:</strong></label>
                        <textarea data-key="phase3.okrs.kr1">Increase the number of weekly active users who create a shopping list from 1,000 to 5,000.</textarea>

                        <label><strong>Key Result 2:</strong></label>
                        <textarea data-key="phase3.okrs.kr2">Increase 4-week user retention from 20% to 35%.</textarea>

                        <label><strong>Initiatives:</strong></label>
                        <textarea data-key="phase3.okrs.initiatives">- Launch v1 of the "Meal-Kit-Mode" smart shopping list.\n- Implement a personalized "What to cook this week" notification system.</textarea>
                    </div>
                    <button class="export-btn">Export as PNG</button> <button class="reset-btn">Reset</button>
                </div>
                <div class="card" id="prioritization">
                    <div class="card-header"><h3>Prioritization Framework</h3></div>
                    <h4>What this is</h4>
                    <p>A system for scoring and ranking initiatives to ensure you're working on the most impactful things. This example uses a weighted scoring model, a common method for balancing different aspects of value and effort. The key is not to follow the score blindly, but to use it as a tool to facilitate a conversation about what's truly important.</p>
                    <h4>Framework</h4>
                    <div id="prioritization-framework">
                        <form>
                            <label>Opportunity Value (35%)</label>
                            <select id="opp-value" data-weight="0.35">
                                <option value="1">1 (&lt; $100K)</option>
                                <option value="1.5">1.5 ($100K–$500K)</option>
                                <option value="2">2 ($500K–$1M)</option>
                                <option value="2.5">2.5 ($1M–$1.5M)</option>
                                <option value="3">3 ($1.5M–$2.5M)</option>
                                <option value="3.5">3.5 ($2.5M–$3.5M)</option>
                                <option value="4">4 (&gt; $3.5M)</option>
                            </select>
                             <label>Customer Value (20%)</label>
                            <select id="cust-value" data-weight="0.20">
                                <option value="1">1 (Negligible)</option>
                                <option value="2">2 (Moderate)</option>
                                <option value="3">3 (Strong)</option>
                                <option value="4">4 (Very High)</option>
                            </select>
                            <label>Feasibility Value (10%)</label>
                            <select id="feas-value" data-weight="0.10">
                                <option value="0">0 (None)</option>
                                <option value="1">1 (Low)</option>
                                <option value="2">2 (Low-Medium)</option>
                                <option value="3">3 (Medium-High)</option>
                                <option value="4">4 (High)</option>
                            </select>
                            <label>Strategic Value (35%)</label>
                            <select id="strat-value" data-weight="0.35">
                                <option value="1">1 (Negligible)</option>
                                <option value="2">2 (Measurable)</option>
                                <option value="3">3 (Significant)</option>
                                <option value="4">4 (Critical)</option>
                            </select>
                        </form>
                        <h4>Score: <span id="total-score">0.00</span></h4>
                    </div>
                    <h4>Editable Example</h4><div class="editable"><textarea data-key="phase3.prioritization.notes" placeholder="Notes on prioritization..."></textarea></div>
                    <button class="export-btn">Export as PNG</button> <button class="reset-btn">Reset</button>
                </div>
                 <div class="card" id="raci-matrix">
                    <div class="card-header"><h3>RACI Matrix</h3></div>
                    <h4>What this is</h4>
                    <p>A RACI matrix is a responsibility assignment chart that maps out every task, milestone or key decision involved in completing a project and assigns which roles are Responsible, Accountable, Consulted and Informed for each action item.</p>
                    <h4>Editable Example</h4>
                    <div class="editable"><textarea data-key="phase3.raci.content" placeholder="e.g., Feature Launch: PM (A), Eng (R), Design (C), Marketing (I)"></textarea></div>
                    <button class="export-btn">Export as PNG</button> <button class="reset-btn">Reset</button>
                </div>
            </section>

            <section id="phase4">
                <h2>Phase 4: Post-Release & Continuous Learning</h2>
                <div class="card" id="kpi-dashboard">
                    <div class="card-header"><h3>KPI Dashboard Starter</h3></div>
                    <h4>What this is</h4>
                    <p>A dashboard to track your Key Performance Indicators (KPIs) after launch. This helps you understand if you're achieving your product outcomes. A common framework for product KPIs is AARRR (Acquisition, Activation, Retention, Referral, Revenue), also known as Pirate Metrics.</p>
                    <h4>Editable Example: "Recipe Finder" App</h4>
                    <div class="editable">
                        <label><strong>Acquisition:</strong> Where are users coming from?</label>
                        <textarea data-key="phase4.kpi.acquisition">- Downloads per week: 1,500\n- App Store conversion rate: 25%</textarea>

                        <label><strong>Activation:</strong> Are users getting to the "aha!" moment?</label>
                        <textarea data-key="phase4.kpi.activation">- % of users creating a shopping list in first week: 40%\n- Onboarding completion rate: 85%</textarea>

                        <label><strong>Retention:</strong> Are users coming back?</label>
                        <textarea data-key="phase4.kpi.retention">- 4-week retention: 35%\n- Daily Active Users (DAU): 8,000</textarea>

                        <label><strong>Referral:</strong> Are users telling others?</label>
                        <textarea data-key="phase4.kpi.referral">- # of invites sent per user: 0.2\n- Viral coefficient (k-factor): 0.1</textarea>

                        <label><strong>Revenue:</strong> Are we making money?</label>
                        <textarea data-key="phase4.kpi.revenue">- # of premium subscriptions: 500\n- Monthly Recurring Revenue (MRR): $2,500</textarea>
                    </div>
                    <button class="export-btn">Export as PNG</button> <button class="reset-btn">Reset</button>
                </div>
                <div class="card" id="ux-metrics">
                    <div class="card-header"><h3>UX Metrics Checklist</h3></div>
                    <h4>What this is</h4>
                    <p>A checklist of common User Experience (UX) metrics to track. These help you understand the usability of your product and identify areas for improvement.</p>
                    <h4>Editable Example</h4>
                    <div class="editable">
                        <textarea data-key="phase4.ux.checklist">- [x] Task Success Rate > 80% for 'Create Shopping List'\n- [ ] Time on Task < 60 seconds for 'Find a Recipe'\n- [ ] System Usability Scale (SUS) score > 75\n- [ ] User satisfaction (CSAT) score > 90% for new features</textarea>
                    </div>
                    <button class="export-btn">Export as PNG</button> <button class="reset-btn">Reset</button>
                </div>
                <div class="card" id="learning-log">
                    <div class="card-header"><h3>Continuous Learning Log</h3></div>
                    <h4>What this is</h4>
                    <p>A simple log to capture what you're learning from your data and user feedback. This is the heart of continuous discovery and improvement. The goal is to turn insights into action.</p>
                    <h4>Editable Example</h4>
                    <div class="editable">
                        <label><strong>Insight / What we learned:</strong></label>
                        <textarea data-key="phase4.learning.insight">Users are successfully creating shopping lists, but many are not using them in-store (based on session data).</textarea>

                        <label><strong>Next Action / What we'll do:</strong></label>
                        <textarea data-key="phase4.learning.action">Conduct 5 user interviews with people who have created lists but not used them to understand why. Is it a usability issue? A context issue?</textarea>
                    </div>
                    <button class="export-btn">Export as PNG</button> <button class="reset-btn">Reset</button>
                </div>
            </section>
        </main>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const textareas = document.querySelectorAll('textarea[data-key]');

            // 1. LocalStorage Persistence
            function loadState() {
                textareas.forEach(textarea => {
                    const key = `PMPlaybook.${textarea.dataset.key}`;
                    const savedValue = localStorage.getItem(key);
                    if (savedValue) {
                        textarea.value = savedValue;
                    }
                });
            }

            function saveState(key, value) {
                localStorage.setItem(`PMPlaybook.${key}`, value);
            }

            textareas.forEach(textarea => {
                textarea.addEventListener('input', () => {
                    saveState(textarea.dataset.key, textarea.value);
                });
            });

            // Initial load
            loadState();

            // 2. Sidebar Navigation
            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('.sidebar nav a');

            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 60) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').includes(current)) {
                        link.classList.add('active');
                    }
                });
            });

            // 3. Screenshot Export
            document.querySelectorAll('.export-btn').forEach(button => {
                button.addEventListener('click', () => {
                    const card = button.closest('.card');
                    const title = card.querySelector('h3').innerText.trim().replace(/\\s+/g, '_');
                    html2canvas(card).then(canvas => {
                        const link = document.createElement('a');
                        link.download = `${title}.png`;
                        link.href = canvas.toDataURL('image/png');
                        link.click();
                    });
                });
            });

            // 4. Reset Functionality
            document.querySelectorAll('.reset-btn').forEach(button => {
                button.addEventListener('click', () => {
                    if (confirm('Are you sure you want to reset this card?')) {
                        const card = button.closest('.card');
                        const textarea = card.querySelector('textarea[data-key]');
                        if (textarea) {
                            textarea.value = '';
                            localStorage.removeItem(`PMPlaybook.${textarea.dataset.key}`);
                        }
                    }
                });
            });

            // 5. Interactive Lifecycle Diagram
            const lifecycleContainer = document.getElementById('lifecycle-diagram');
            const phases = [
                { name: 'Definition', id: 'phase1' },
                { name: 'Discovery', id: 'phase2' },
                { name: 'Delivery', id: 'phase3' },
                { name: 'Learning', id: 'phase4' }
            ];

            phases.forEach(phase => {
                const phaseEl = document.createElement('div');
                phaseEl.className = 'lifecycle-phase';
                phaseEl.innerHTML = `<div class="lifecycle-dot"></div><span>${phase.name}</span>`;
                phaseEl.addEventListener('click', () => {
                    document.getElementById(phase.id).scrollIntoView({ behavior: 'smooth' });
                });
                lifecycleContainer.appendChild(phaseEl);
            });

            // 6. Prioritization Framework
            const prioritizationForm = document.querySelector('#prioritization-framework form');
            const scoreEl = document.getElementById('total-score');

            function calculateScore() {
                const selects = prioritizationForm.querySelectorAll('select');
                let totalScore = 0;
                selects.forEach(select => {
                    const weight = parseFloat(select.dataset.weight);
                    const value = parseFloat(select.value);
                    totalScore += weight * value;
                });
                scoreEl.textContent = totalScore.toFixed(2);
            }

            prioritizationForm.addEventListener('change', calculateScore);

            // Initial calculation
            calculateScore();
        });
    </script>
</body>
</html>
